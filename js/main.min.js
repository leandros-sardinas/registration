var Location=function(a,b,c,d,e){this.location=a,this.date=b,this.time=c,this.address=d,this.title=e},showLocations=[new Location("Windsor","April 10th 2017","5:00 PM","1855 Huron Church Road, Windsor, ON N9C 2L6","Holiday Inn & Suites Ambassador Bridge"),new Location("London","April 11th","5:00 PM","591 Wellington Rd., London, ON N6C 4R3","Best Western Plus Lamplighter Inn & Conference Centre"),new Location("GTA","April 12th","5:00 PM","90 Biscayne Crescent, Brampton, ON  L6W 4S1","Courtyard by Marriott Brampton Hotel & Convention Centre"),new Location("Kelowna","April 18th","5:00 PM","2170 Harvey Ave., Kelowna, BC  V1Y 6G8","Ramada Hotel & Conference Centre"),new Location("Nanaimo","April 19th","5:00 PM","11 Bastion Street, Nanaimo, BC  V9R 6E4","Coast Bastion Hotel"),new Location("Calgary","April 20th","5:00 PM","5940 Blackfoot Trail SE, Calgary, AB  T2H 2B5","Hotel Blackfoot"),new Location("Edmonton","April 21th","5:00 PM","10011 184 Street NW, Edmonton, AB  T5S 0C7","Courtyard by Marriott Edmonton West"),new Location("Winnipeg","April 24th","5:00 PM","1295 Ellice Ave., Winnipeg, MB  R3G 0N5","Homewood Suites by Hilton Winnipeg Airport Polo Park"),new Location("Montreal","April 26th","5:00 PM","7655, boul. Decarie, Montreal, QC  H4P 2H2","Hotel Ruby Foo's"),new Location("Halifax","April 27th","1:30 PM","250 St. Margaret's Bay Road, Halifax, NS  B3N 1J4","Best Western Plus Chocolate Lake Hotel"),new Location("Moncton","April 28th","12:30 PM","\t700 Mapleton Road, Moncton, NB  E1G 0L7","Hampton Inn & Suites by Hilton Moncton")],languages=[{lang:"en",schedule:"Schedule",register:"Register",title:"",name:"Name",accountNumber:"Account Number",emailAddress:"Email Address",locations:"Locations",sectionTitle:"Register",eventName:"Road Show 2017",homeMessage:"Registration closes 5 days prior to each event",success:"Thanks for registering, your spot has been saved. Please print this page as a confirmation.",error:"An error has ocurred, please try again later",registeredLocations:"Your locations"},{lang:"fr",schedule:"Programme",register:"Registre",title:"",name:"Nom",accountNumber:"Numéro de compte",emailAddress:"Adresse du couriel",locations:"Emplacements",sectionTitle:"Registre",eventName:"Road Show 2017",homeMessage:"L’inscription se termine 5 jours avant chaque evenement",success:"Merci pour votre inscription, votre place a été enregistrée. Veuillez imprimer cette page comme confirmation",error:"Un erreur est survenue, veuillez réessayer plus tard",registeredLocations:"Vos endroits"}],errorMessages=[{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}."),step:$.validator.format("Please enter a multiple of {0}.")},{required:"Cet domaine est obligatoire",remote:"Veuillez corriger cet domaine",email:"Veuillez rentrer un valide  couriel",url:"Veuillez rentrer une adresse valide URL",date:"Veuillez renttrer une date valide",dateISO:"Veuillez rentrer une date valide (ISO)",number:"Veuillez fournir un numéro valide.",digits:"Veuillez fournir seulement des chiffres.",equalTo:"Veuillez fournir encore la même valeur.",maxlength:$.validator.format("Veuillez fournir au plus {0} caractères."),minlength:$.validator.format("Veuillez fournir au moins {0} caractères."),rangelength:$.validator.format("Veuillez fournir une valeur qui contient entre {0} et {1} caractères."),range:$.validator.format("Veuillez fournir une valeur entre {0} et {1}."),max:$.validator.format("Veuillez fournir une valeur inférieure ou égale à {0}."),min:$.validator.format("Veuillez fournir une valeur supérieure ou égale à {0}.")}],config={apiKey:"AIzaSyB6U7NOrwarwZp0cmuDHKJsISr_ZGqF9bA",authDomain:"registration-form-b1863.firebaseapp.com",databaseURL:"https://registration-form-b1863.firebaseio.com",storageBucket:"registration-form-b1863.appspot.com",messagingSenderId:"402584104810"};firebase.initializeApp(config);var RegisterModel=function(){var a=this;a.EN="en",a.FR="fr",a.REGISTER="register",a.SCHEDULE="schedule",a.STORAGEREGISTERLANG="register-lang",a.STORAGEREGISTERLOCATION="registered-locations",ko.bindingHandlers.fadeVisible={init:function(a,b){var c=b();$(a).toggle(ko.utils.unwrapObservable(c))},update:function(a,b){var c=b();ko.utils.unwrapObservable(c)?$(a).fadeIn():$(a).fadeOut()}},this.name=ko.observable(),this.accountNumber=ko.observable(),this.emailAddress=ko.observable(),this.location=ko.observable(),this.success=ko.observable(!1),this.error=ko.observable(!1),this.inProgress=ko.observable(!1),this.isLocalStorage=Modernizr.localstorage,this.selectedLanguage=ko.observable(),this.selectedSection=ko.observable(a.REGISTER),this.selectedLocation=ko.observable(),this.language=ko.observable(languages[0]),this.locations=ko.observableArray(showLocations),this.registeredLocations=ko.observableArray(),this.title=ko.computed(function(){var b="";return a.selectedSection()==a.REGISTER?b=a.language().register:a.selectedSection()==a.SCHEDULE&&(b=a.language().schedule),b}),a.selectedLocation.subscribe(function(b){a.success(!1)}),this.init=function(){var b=a.isLocalStorage===!0?localStorage.getItem(a.STORAGEREGISTERLANG):a.EN;switch(b){case a.FR:a.setFrench();break;default:a.setEnglish()}a.selectedLocation(a.locations()[0]),a.updateRegisteredShows()},this.updateRegisteredShows=function(){if(a.isLocalStorage){var b=JSON.parse(localStorage.getItem(a.STORAGEREGISTERLOCATION)),c=a.findLocations(b);a.registeredLocations(c)}},this.findLocations=function(b){for(var c=[],d=0;d<a.locations().length;d++){var e=$.inArray(a.locations()[d].location,b);e!=-1&&c.push(a.locations()[d])}return c},this.findLang=function(a){for(var b=void 0,c=0;c<languages.length;c++)if(languages[c].lang===a){b=languages[c];break}return void 0===b?languages[0]:b},this.setEnglish=function(){a.isLocalStorage&&localStorage.setItem(a.STORAGEREGISTERLANG,a.EN);var b=a.findLang(a.EN);a.selectedLanguage(a.EN),a.language(b),$.extend($.validator.messages,errorMessages[0])},this.setFrench=function(){a.isLocalStorage&&localStorage.setItem(a.STORAGEREGISTERLANG,a.FR);var b=a.findLang(a.FR);a.selectedLanguage(a.FR),a.language(b),$.extend($.validator.messages,errorMessages[1])},this.selectRegister=function(){a.selectedSection(a.REGISTER)},this.selectSchedule=function(){a.selectedSection(a.SCHEDULE)},this.toEmail=function(){return{Name:a.name(),"Email Address":a.emailAddress(),"Account Number":a.accountNumber(),Location:a.selectedLocation().location}},this.send=function(){if($("#registration-form").valid()&&a.selectedLocation()){if(a.isLocalStorage){var b,c=localStorage.getItem(a.STORAGEREGISTERLOCATION);b=null===c?[]:JSON.parse(c),b.push(a.selectedLocation().location),localStorage.setItem(a.STORAGEREGISTERLOCATION,JSON.stringify(b))}a.success(!1),a.error(!1),a.inProgress(!0),$.ajax({url:"https://formspree.io/anya.pukhlenko@shadeomatic.ca",method:"POST",data:a.toEmail(),dataType:"json"}).success(function(){a.success(!0),a.updateRegisteredShows()}).error(function(){a.error(!0)}).complete(function(){try{var b=firebase.database();b.goOnline(),b.ref("register").push(a.toEmail()),b.goOffline()}catch(a){console.log(a)}a.inProgress(!1),a.name(""),a.emailAddress(""),a.accountNumber("")})}},a.init()};ko.applyBindings(new RegisterModel);